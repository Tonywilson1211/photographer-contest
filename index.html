<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NicheCom Photo Contest</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        #dynamicBg { transition: background-image 1s ease-in-out; }
        .zoom-in { animation: zoomIn 0.2s ease-out; }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans min-h-screen flex flex-col relative overflow-x-hidden">

    <div id="dynamicBg" class="fixed inset-0 z-0 bg-cover bg-center opacity-40"></div>
    <div class="fixed inset-0 z-0 bg-gradient-to-t from-gray-900 via-gray-900/90 to-gray-900/80"></div>

    <div id="landingPage" class="relative z-10 flex-grow flex flex-col items-center justify-center p-6 text-center fade-in">
        <h1 class="text-6xl font-bold mb-2 tracking-tighter text-white drop-shadow-2xl">Photo of the Month</h1>
        <p class="text-xl text-gray-300 mb-8 font-light">Orbital Area 2 Team</p>

        <div id="statusBadge" class="mb-10 px-6 py-2 rounded-full bg-black/50 border border-gray-600 backdrop-blur-md text-sm font-mono text-blue-300 shadow-lg">
            Checking Status...
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl">
            <button id="mainActionBtn" onclick="enterCurrentMonth()" class="bg-blue-600/90 hover:bg-blue-600 p-8 rounded-2xl shadow-2xl transition border border-blue-400/30 group hover:-translate-y-1 backdrop-blur-sm">
                <div class="text-4xl mb-3">üì∏</div>
                <h2 id="mainBtnTitle" class="text-xl font-bold text-white">Loading...</h2>
            </button>

            <button onclick="showUpload()" class="bg-gray-800/80 hover:bg-gray-700/90 p-8 rounded-2xl shadow-2xl transition border border-gray-600 group hover:-translate-y-1 backdrop-blur-sm">
                <div class="text-4xl mb-3">üì§</div>
                <h2 class="text-xl font-bold text-white">Upload Entry</h2>
            </button>

            <button onclick="showArchiveHub()" class="bg-gray-800/80 hover:bg-gray-700/90 p-8 rounded-2xl shadow-2xl transition border border-gray-600 group hover:-translate-y-1 backdrop-blur-sm">
                <div class="text-4xl mb-3">üèõÔ∏è</div>
                <h2 class="text-xl font-bold text-white">The Archives</h2>
            </button>

            <button onclick="showLeaderboard()" class="bg-yellow-600/80 hover:bg-yellow-500/90 p-8 rounded-2xl shadow-2xl transition border border-yellow-500/30 group hover:-translate-y-1 backdrop-blur-sm">
                <div class="text-4xl mb-3">üëë</div>
                <h2 class="text-xl font-bold text-white">Leaderboard</h2>
            </button>
        </div>
    </div>

    <div id="leaderboardPage" class="hidden relative z-10 flex-grow flex flex-col items-center p-8 fade-in w-full max-w-4xl mx-auto">
        <h2 class="text-4xl font-bold mb-2 text-yellow-500">All-Time Standings</h2>
        <p class="text-gray-400 mb-8">Points: 1st (3pts), 2nd (2pts), 3rd (1pt)</p>
        
        <div class="w-full bg-gray-800/80 backdrop-blur-md rounded-2xl border border-gray-700 overflow-hidden shadow-2xl">
            <div class="grid grid-cols-12 bg-gray-900/50 p-4 font-bold text-gray-400 text-sm uppercase tracking-wider">
                <div class="col-span-2 text-center">Rank</div>
                <div class="col-span-6">Photographer</div>
                <div class="col-span-2 text-center">Wins (G/S/B)</div>
                <div class="col-span-2 text-center text-white">Total Pts</div>
            </div>
            <div id="leaderboardGrid"></div>
        </div>
        <button onclick="goHome()" class="mt-12 text-gray-400 hover:text-white underline">Back to Home</button>
    </div>

    <div id="archiveHub" class="hidden relative z-10 flex-grow flex flex-col items-center p-8 fade-in w-full max-w-6xl mx-auto">
        <h2 class="text-4xl font-bold mb-8">Previous Collections</h2>
        <button onclick="loadAllArchives()" class="w-full max-w-lg bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white font-bold py-6 rounded-xl shadow-lg mb-10 transform hover:scale-105 transition border border-purple-400/30">
            ‚ú® View All Images (Full History)
        </button>
        <div class="w-full border-t border-gray-700 mb-8"></div>
        <div id="archiveGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full"></div>
        <button onclick="goHome()" class="mt-12 text-gray-400 hover:text-white underline">Back to Home</button>
    </div>

    <div id="app" class="hidden relative z-10 container mx-auto px-4 py-8 fade-in">
        <header class="flex flex-col gap-4 mb-10 border-b border-gray-700 pb-6">
            <div class="flex justify-between items-start">
                <div>
                    <button onclick="goHome()" class="text-xs text-gray-400 hover:text-white mb-2">‚Üê Back to Menu</button>
                    <h1 id="contestTitle" class="text-3xl font-bold text-white">Gallery</h1>
                    <p id="contestSubtitle" class="text-blue-400 mt-1"></p>
                </div>
                <div class="flex gap-2">
                    <button id="adminControls" onclick="openAdminModal()" class="hidden bg-red-600 hover:bg-red-500 text-white text-xs px-3 py-1 rounded h-8">‚öôÔ∏è Close Voting</button>
                    <button id="submitBtn" onclick="submitVotes()" class="hidden bg-blue-600 px-6 py-2 rounded-full font-bold shadow-lg hover:bg-blue-500 transition">Submit Votes (<span id="voteCountBadge">0/3</span>)</button>
                </div>
            </div>
            <div id="filterBar" class="hidden flex flex-wrap gap-2 items-center bg-gray-800/50 p-2 rounded-lg backdrop-blur-sm self-start">
                <span class="text-xs text-gray-400 px-2 mr-2">FILTER BY:</span>
                <button id="filterGold" onclick="toggleFilter(1)" class="px-4 py-1 rounded-full border border-gray-600 text-sm hover:bg-gray-700 transition opacity-50">üèÜ 1st Place</button>
                <button id="filterSilver" onclick="toggleFilter(2)" class="px-4 py-1 rounded-full border border-gray-600 text-sm hover:bg-gray-700 transition opacity-50">ü•à 2nd Place</button>
                <button id="filterBronze" onclick="toggleFilter(3)" class="px-4 py-1 rounded-full border border-gray-600 text-sm hover:bg-gray-700 transition opacity-50">ü•â 3rd Place</button>
                <button onclick="resetFilters()" class="px-4 py-1 text-xs text-gray-500 hover:text-white underline ml-2">Reset</button>
            </div>
        </header>
        <div id="galleryGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 pb-20"></div>
    </div>

    <div id="uploadPage" class="hidden relative z-10 flex-grow flex flex-col items-center justify-center p-6 fade-in">
        <div class="bg-gray-800 p-8 rounded-2xl max-w-2xl w-full border border-gray-700 text-center shadow-2xl">
            <h2 class="text-3xl font-bold mb-4">Upload Phase</h2>
            <p class="text-gray-400 mb-6">Send your top 3 images to Anthony.</p>
            <a href="mailto:anthony.wilson@nichecom.co.uk" class="block w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded-xl mb-4 transition">Email Entries</a>
            <button onclick="goHome()" class="text-gray-400 underline">Back</button>
        </div>
    </div>

    <div id="loginModal" class="hidden fixed inset-0 z-50 bg-black/95 flex items-center justify-center fade-in">
        <div class="bg-gray-800 p-8 rounded-xl max-w-sm w-full border border-gray-700">
            <h2 class="text-xl font-bold mb-4 text-white">Identify Yourself</h2>
            <select id="userSelect" class="w-full p-3 mb-6 bg-gray-900 border border-gray-600 rounded text-white"></select>
            <div class="flex gap-3">
                <button onclick="goHome()" class="flex-1 bg-gray-700 py-2 rounded">Cancel</button>
                <button onclick="login()" class="flex-1 bg-blue-600 py-2 rounded font-bold">Enter</button>
            </div>
        </div>
    </div>

    <div id="adminModal" class="hidden fixed inset-0 z-50 bg-black/95 flex items-center justify-center fade-in">
        <div class="bg-gray-800 p-8 rounded-xl max-w-lg w-full border border-red-500/50">
            <h2 class="text-2xl font-bold mb-4 text-white">‚öôÔ∏è Close Contest & Generate JSON</h2>
            <div class="grid grid-cols-3 gap-4 mb-4">
                <div><label class="text-xs text-yellow-500">Gold ID</label><input id="adminGold" type="number" class="w-full bg-gray-900 border border-gray-700 p-2 rounded text-white"></div>
                <div><label class="text-xs text-gray-400">Silver ID</label><input id="adminSilver" type="number" class="w-full bg-gray-900 border border-gray-700 p-2 rounded text-white"></div>
                <div><label class="text-xs text-orange-500">Bronze ID</label><input id="adminBronze" type="number" class="w-full bg-gray-900 border border-gray-700 p-2 rounded text-white"></div>
            </div>
            <div class="mb-6"><label class="text-xs text-blue-400">Total Votes</label><input id="adminVotes" type="number" class="w-full bg-gray-900 border border-gray-700 p-2 rounded text-white"></div>
            <button onclick="generateCloseJSON()" class="w-full bg-green-600 hover:bg-green-500 text-white font-bold py-3 rounded mb-4">Generate Code</button>
            <textarea id="adminOutput" class="hidden w-full h-48 bg-black text-green-400 font-mono text-xs p-4 rounded border border-gray-700" readonly></textarea>
            <button onclick="hideAll(); document.getElementById('app').classList.remove('hidden');" class="mt-4 text-gray-500 hover:text-white underline w-full text-center">Close Window</button>
        </div>
    </div>

    <div id="lightbox" onclick="closeLightbox()" class="hidden fixed inset-0 z-[100] bg-black/95 flex items-center justify-center p-4 fade-in cursor-zoom-out">
        <img id="lightboxImg" src="" class="max-w-full max-h-screen object-contain rounded shadow-2xl zoom-in" onclick="event.stopPropagation()">
        <button onclick="closeLightbox()" class="absolute top-4 right-4 text-white text-4xl hover:text-gray-300">&times;</button>
    </div>

    <script src="app.js"></script>
</body>
</html>